sudo: required
services:
  - docker
language: go
env:
  global:
    - CGO_ENABLED=0 GO111MODULE=on
  matrix:
    - MYSERVICE=eventservice
    - MYSERVICE=bookservice
install: true
script: 
  - cd $MYSERVICE && go build 
  - docker image build -t myevents/$MYSERVICE:$TRAVIS_BRANCH $MYSERVICE
after_success:
  - if [ -n "${TRAVIS_TAG}" ; then
      docker login -u="${DOCKER_USERNAME}" -p="${DOCKER_PASSWORD}";
      docker push myevents/$MYSERVICE:$TRAVIS_BRANCH;
    fi

